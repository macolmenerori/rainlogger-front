# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a React/TypeScript web application for RainLogger, a rainfall monitoring system. The frontend allows users to log and track rainfall amounts.

## Development Commands

- **Development server**: `pnpm dev` (React Router dev server on port 3000)
- **Build**: `pnpm build` (React Router build, output to `dist/`)
- **Preview**: `pnpm preview` (preview production build locally on port 3000)
- **Test**: `pnpm test` (Vitest - not yet configured)
- **Linting**: `pnpm lint` (ESLint with auto-fix)
- **Formatting**: `pnpm prettify` (Prettier formatting)
- **Type checking**: `pnpm types` (React Router typegen + TypeScript compiler check)

## Architecture

### React Router Framework Mode
This project uses **React Router v7 in framework mode** (SPA, no SSR).

- **Config**: `react-router.config.ts` - framework settings (`ssr: false`, `buildDirectory: 'dist'`)
- **Root**: `app/root.tsx` - HTML shell (`Layout`), app entry (`App` with `ThemeProvider` + `<Outlet />`), and `ErrorBoundary`
- **Routes**: `app/routes.ts` - route definitions using `@react-router/dev/routes`
- **Auto-generated types**: `.react-router/types/` (gitignored, generated by `react-router typegen`)

### Route Structure
- `/` → `app/pages/MainPage/MainPage.tsx`
- `/newlog` → `app/pages/NewLog/NewLog.tsx`
- `/watchlogs` → `app/pages/WatchLogs/WatchLogs.tsx`
- `/login` → `app/pages/Login/Login.tsx`

### Core Structure
- **Pages**: `app/pages/<PageName>/<PageName>.tsx` - each page exports a default component and a `meta()` function
- **Components**: `app/components/` (to be created)
- **Theme**: `app/ui/theme/` - MUI theme configuration
  - `theme.json` - source of truth for palette and typography values (dark mode)
  - `theme.ts` - `createAppTheme(mode)` factory using MUI's `createTheme()`; exports pre-built `appTheme`
  - `ThemeContext.tsx` - `ThemeProvider` component wrapping MUI's `ThemeProvider` + `CssBaseline`
- **Types**: `app/types/` (to be created)
- **Static files**: `public/` - served at root

## Technology Stack

- **Frontend**: React 19, TypeScript 5.9
- **Routing**: React Router 7 (framework mode)
- **UI Library**: Material UI 7 (`@mui/material`) with Emotion (`@emotion/react`, `@emotion/styled`)
- **Icons**: `@mui/icons-material`
- **Font**: Roboto via `@fontsource/roboto` (weights 300, 400, 500, 700)
- **Build**: Vite 7 (via `@react-router/dev/vite` plugin)
- **Testing**: Vitest (to be configured)
- **Linting**: ESLint 9 (flat config) with TypeScript, React, jsx-a11y, testing-library, simple-import-sort, and Prettier integration
- **Formatting**: Prettier
- **Package manager**: pnpm

## Important Notes

- Uses path aliases (`@/*` maps to `app/*`) via `vite-tsconfig-paths`
- ESLint config is in `eslint.config.js` (ES module flat config)
- Build output directory: `dist/`
- `tsconfig.json` includes `rootDirs` for `.react-router/types` auto-generated route types
- Don't use `({}: Type)` destructuring pattern — use `(_args: Type)` instead to avoid `no-empty-pattern` ESLint error
- **Theming**: Only dark mode is active. The `createAppTheme(mode)` factory in `app/ui/theme/theme.ts` accepts `'dark' | 'light'` to support a future light theme. Theme palette values live in `app/ui/theme/theme.json`
- **ThemeProvider placement**: Wraps `<Outlet />` in `App` (`root.tsx`), not in `Layout`. `ErrorBoundary` is intentionally outside ThemeProvider
